<mat-expansion-panel>
  <mat-expansion-panel-header>
    <mat-panel-title>
      {{service.name}}
    </mat-panel-title>
    <mat-panel-description>
      {{service.status}}
    </mat-panel-description>
  </mat-expansion-panel-header>
  <form #parameterForm="ngForm">
    <p *ngFor="let param of service.parameters">
      <mat-form-field>
        <input matInput type="number" [name]="service.name + '>' + param.name" [ngModel]="param.value"
               [placeholder]="param.name" [min]="param.min" [max]="param.max">
        <mat-hint *ngIf="param.min || param.max">({{param.min | number}} - {{param.max | number}})</mat-hint>
      </mat-form-field>
    </p>
    <mat-form-field>
      <mat-select name="selectedStrategy" [ngModel]="strategy" placeholder="Strategy">
        <mat-option *ngFor="let strategy of service.strategies" [value]="strategy">
          {{strategy.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <div *ngIf="parameterForm.value.selectedStrategy">
      <p *ngFor="let param of parameterForm.value.selectedStrategy.parameters">
        <mat-form-field>
          <input matInput type="number" [name]="service.name + '>' + param.name" [ngModel]="param.value"
                 [placeholder]="param.name" [min]="param.min" [max]="param.max">
          <mat-hint *ngIf="param.min || param.max">({{param.min | number}} - {{param.max | number}})</mat-hint>
        </mat-form-field>
      </p>
    </div>
  </form>
  <mat-action-row>
    <button mat-button color="primary" (click)="sendCommand('start', parameterForm)">Start</button>
    <button mat-button color="primary" (click)="sendCommand('complete')">Complete</button>
    <button mat-button color="primary" (click)="sendCommand('reset')">Reset</button>
    <button mat-button (click)="sendCommand('pause')">Pause</button>
    <button mat-button (click)="sendCommand('resume')">Resume</button>
    <button mat-button (click)="sendCommand('unhold')">Unhold</button>
    <button mat-button color="warn" (click)="sendCommand('stop')">Stop</button>
    <button mat-button color="warn" (click)="sendCommand('abort')">Abort</button>
  </mat-action-row>
</mat-expansion-panel>
